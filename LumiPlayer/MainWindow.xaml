<Window x:Class="LumiPlayer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        
        xmlns:header="clr-namespace:LumiPlayer.View.UserControls"     
        xmlns:blur="clr-namespace:LumiPlayer.BlurEffect"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:viewModel="clr-namespace:LumiPlayer.MVVM"
        
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LumiPlayer"
        mc:Ignorable="d"
        WindowStyle="None"
        BorderBrush="Transparent"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStartupLocation="CenterScreen"
        Title="Lumi player" Height="220" Width="450">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/LumiPlayer;component/Styles/BasicStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <i:Interaction.Behaviors>
        <blur:BlurBehavior/>
    </i:Interaction.Behaviors>
    
    <Grid Background="#30000000">
        <header:CustomHeader VerticalAlignment="Top"/>

        <Grid Margin="0 30 0 0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="180"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Track image -->
            <Border Grid.Column="0" Background="Transparent" CornerRadius="6" BorderThickness="3" Margin="10">
                <Image Source="{Binding TrackInfoVM.TrackImage}" Stretch="Fill"/>
            </Border>
            
            <!-- music player -->
            <StackPanel Grid.Column="1" Orientation="Vertical">
                <TextBlock x:Name="TrackName" FontSize="24" Foreground="White" Text="{Binding TrackInfoVM.TrackName}" FontWeight="Bold" Margin="10 10 0 0"/>
                <TextBlock x:Name="TrackExecuter" FontSize="14" Foreground="Gray" Text="{Binding TrackInfoVM.TrackExecuter}" FontWeight="Bold" Margin="10 0 0 50"/>

                <!-- track duration -->
                <StackPanel Orientation="Horizontal" x:Name="TrackDetails">
                    <TextBlock FontSize="7" FontWeight="Bold" Foreground="White" Text="{Binding TrackInfoVM.CurrentTime}" Margin="5 0 0 0"/>
                    <Slider Minimum="0" Maximum="{Binding PlaybackVM.SliderMaximum}" x:Name="TrackDurationSlider" IsSelectionRangeEnabled="True" Margin="5 0 0 0" Height="10" Width="210" Background="#1E293B" Value="{Binding PlaybackVM.SliderValue}"/>
                    <TextBlock FontSize="7" Foreground="White" FontWeight="Bold" Text="{Binding TrackInfoVM.TrackDuration}" Margin="5 0 0 0"/>
                </StackPanel>
                
                <!-- track control buttons -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Command="{Binding PlaybackVM.ShuffleCommand}" Style="{StaticResource ButtonControlClick}" Height="25" Width="25" Background="Transparent" BorderBrush="Transparent" Margin="5">
                        <Image Source="{Binding PlaybackVM.ShuffleButton}" Stretch="Fill"/>
                    </Button>

                    <Button Command="{Binding PlaybackVM.PreviousTrackCommand}" Style="{StaticResource ButtonControlClick}" Height="25" Width="25" Background="Transparent" BorderBrush="Transparent" Margin="5">
                        <Image Source="{Binding PlaybackVM.PreviousTrackButton}" Stretch="Fill"/>
                    </Button>
                    <Button Command="{Binding PlaybackVM.PauseCommand}" Style="{StaticResource ButtonControlClick}" Height="25" Width="25" Background="Transparent" BorderBrush="Transparent" Margin="5">
                        <Image Source="{Binding PlaybackVM.PauseButton}" Stretch="Fill"/>
                    </Button>
                    <Button Command="{Binding PlaybackVM.NextTrackCommand}" Style="{StaticResource ButtonControlClick}" Height="25" Width="25" Background="Transparent" BorderBrush="Transparent" Margin="5">
                        <Image Source="{Binding PlaybackVM.NextTrackButton}" Stretch="Fill"/>
                    </Button>

                    <Button Command="{Binding PlaybackVM.RepeatCommand}" Style="{StaticResource ButtonControlClick}" Height="25" Width="25" Background="Transparent" BorderBrush="Transparent" Margin="5">
                        <Image Source="{Binding PlaybackVM.RepeatButton}" Stretch="Fill"/>
                    </Button>
                </StackPanel>
                
                <!-- settings panel -->
                <StackPanel Orientation="Horizontal">
                    <Button Command="{Binding AudioSettingsVM.OpenFolder}" Style="{StaticResource ButtonControlClick}" Height="25" Width="25" Background="Transparent" BorderBrush="Transparent" Margin="0">
                        <Image Source="/Resources/img/folder-open-dot.png" Stretch="Fill"/>
                    </Button>
                    <StackPanel Orientation="Vertical" Width="120" Margin="0 5 0 0">
                        <TextBlock Text="{Binding AudioSettingsVM.PathText}" Foreground="Gray" FontWeight="Bold"/>
                        <Border Background="Transparent" BorderBrush="Gray" BorderThickness="0.8" VerticalAlignment="Bottom" Width="120" Margin="0 0 0 5"/>
                    </StackPanel>

                    <Button Command="{Binding AudioSettingsVM.VolumeCommand}" Style="{StaticResource ButtonControlClick}" Height="25" Width="25" Background="Transparent" BorderBrush="Transparent" Margin="30 0 0 0">
                        <Image Source="{Binding AudioSettingsVM.VolumeButton}" Stretch="Fill"/>
                    </Button>
                    <Slider Minimum="0" Maximum="{Binding AudioSettingsVM.VolumeSliderMaximum}" Value="{Binding AudioSettingsVM.VolumeSliderValue}" Width="50" Height="7" Margin="5 0 0 0" Background="#1E293B"/>
                </StackPanel>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
